/*! viewmachine 19-02-2014 */
if(void 0===ViewMachine)var ViewMachine={};if(ViewMachine=function(e){"use strict";var t;return t=function(i,r){var n,s,a,l,o,p;if("[object Array]"===Object.prototype.toString.call(i))for(n=0;i.length>n;n+=1)r.append(t(i[n],r));else if("string"==typeof i)e.makeElement(i);else for(s in i)if(i.hasOwnProperty(s)){switch(-1!==s.indexOf(":")&&(a=s.split(":")),l=void 0!==a?a[0]:s){case"div":o=e.makeElement(void 0!==a?a[0]:s,void 0!==a?a[1]:""),o.append(t(i[s],o));break;case"form":o=e.makeForm(i[s]);break;case"list":o=e.makeList(i[s]);break;case"table":o=e.makeTable(i[s].keyList,i[s].data);break;case"b":case"p":o=e.makeElement(void 0!==a?a[0]:s,void 0!==a?a[1]:""),"[object Array]"!==Object.prototype.toString.call(i[s])&&o.append(i[s]);break;case"img":o=["<img "+(void 0!==a?'class="'+a[1]+'" ':"")+'src="'+i[s]+'" '+(void 0!==a?'title="'+a[1]+'" ':"")+'alt="'+(void 0!==a?a[1]:i[s])+'" />'];break;case"h1":case"h2":case"h3":case"h4":o=e.makeElement(void 0!==a?a[0]:s,void 0!==a?a[1]:""),o.append(e.cleanTitles(i[s]));break;default:o=e.makeElement(void 0!==a?a[0]:s,void 0!==a?a[1]:""),o.append(p)}void 0!==o&&r.append(o)}return r},e.build=function(i){var r,n;return r=i.name,n=e.makeElement("div",r+" view"),n=t(i.structure,n)},e.example={name:"example",structure:[{h1:"The Title"},{div:{div:{p:'This is an <a href="#">example<a/> of paragraph text<br>squirted into a document with <b>inner HTML</b> '},form:e.exampleForm}},{"div:myClass":[{h3:"Sub-title"},{"p:green":"This is a list of paragraphs"}]}]},e}(ViewMachine),void 0===ViewMachine)var ViewMachine={compatability:!1};if(void 0===jQuery&&console.log("Please add JS dependecy jQuery before loading this file."),!ViewMachine.compatability)var VM=ViewMachine;if(ViewMachine=function(e,t){"use strict";var i=[];return e.El=function(e,t){return this.element=e,void 0===t&&(t={}),t.id&&(this.id=t.id),this.drawn=!1,this.properties=t,this.children=[],this.events=[],this.style={},this},e.El.prototype={text:function(e){return this.properties.text=e,this.drawn&&this.draw(),this},getId:function(){return this.id?this.id:""+Math.floor(1e7*Math.random()+1)},html:function(e){this.drawn||(this.properties.id=this.getId()),e&&(this.drawn=!0);var r=t("<"+this.element+">",this.properties);r.css(this.style);for(var n=this.children.length,s=0;n>s;s++)t(r).append(this.children[s].html(e));for(var a in this.events)this.events[a].id=this.properties.id,i.push([this.events[a],this]);return r},$:function(){return this.drawn?t("#"+this.properties.id):this.html()},draw:function(){function r(i,r,n,s){t("#"+i).on(r,function(i){t(e).trigger(n,[i,s])})}if(i=[],this.drawn)this.replace(this.html(!0));else{var n=this.html(!0);if("string"==typeof this.parent)t(this.parent).append(n),this.drawn=!0;else{if(this.parent.drawn!==!0)throw"DrawError: Parent element not on page";t("#"+this.parent.properties.id).append(n),this.drawn=!0}}for(var s=i.length,a=0;s>a;a++)"object"==typeof i[a].callback?t("#"+i[a][0].id).on(i[a][0].event,i[a][0].callback):r(i[a][0].id,i[a][0].event,i[a][0].callback,i[a][1]);return this},remove:function(){if(this.drawn&&(t("#"+this.properties.id).remove(),this.drawn=!1),this.properties.id=this.getId(),"string"!=typeof this.parent){this.getId();var e=this.parent.children;for(var i in e)e[i].properties.id===this.properties.id&&this.parent.children.splice(i,1)}return this},replace:function(e){return this.drawn?(t("#"+this.properties.id).replaceWith(e),this):void 0},hide:function(){return this.drawn&&(t("#"+this.properties.id).remove(),this.drawn=!1),this},append:function(e){return e.parent=this,this.children.push(e),this.drawn&&e.draw(),this},prepend:function(e){return e.parent=this,this.children=[e].concat(this.children),this.drawn&&this.draw(),this},splice:function(e,i,r){var n;if(r?(r.parent=this,n=this.children.splice(e,i,r),this.drawn&&(e>0?(t("#"+this.children[e-1].properties.id).after(r.html()),r.drawn=!0):(t("#"+this.properties.id).append(r.html()),r.drawn=!0))):n=this.children.splice(e,i),this.drawn)for(var s=n.length,a=0;s>a;a++)n[a].remove();return this},css:function(e,i){if("string"==typeof e){if(void 0===i)return this.style[i];this.style[e]=i,this.drawn&&t("#"+this.properties.id).css(e,i)}else{this.drawn&&t("#"+this.properties.id).css(e);for(var r in e)this.style[r]=e[r]}return this},event:function(i,r){this.events.push({event:i,callback:r});var n=this;"function"==typeof r?this.drawn&&t("#"+this.properties.id).on(i,r):"string"==typeof r&&this.drawn&&t("#"+this.properties.id).on(i,function(i){t(e).trigger(r,[i,n])})},parent:"body",type:"ViewMachine"},e.ParentEl=function(t,i,r){var n,s,a=t;if(t.properties&&(s=t.properties,a=t.type),n=new e.El(a,s),"number"==typeof r)for(var l=0;r>l;l++)n.append(new e.El(i));else if(Array.isArray(r))for(var o,p=r.length,c=0;p>c;c++)o="object"==typeof r[c]?"ViewMachine"===r[c].type?r[c]:new e.El(i,r[c]):new e.El(i,{text:r[c]}),n.append(o);return n},e.getKeys=function(t,i){var r,n,s,a,l={};for(n in i)if(i.hasOwnProperty(n))if("[object Array]"!==Object.prototype.toString.call(i[n])&&-1!==t.indexOf(n))if("object"==typeof i[n]){r=[];for(s in i[n])i[n].hasOwnProperty(s)&&r.push(s);l[n]=r.join(", "),a=e.getKeys(t,i[n]);for(s in a)a.hasOwnProperty(s)&&(l[s]=a[s])}else l[n]=i[n];else if(i.hasOwnProperty(n)&&"[object Array]"===Object.prototype.toString.call(i[n]))l[n]=i[n].join(", ");else if("object"==typeof i[n]){a=e.getKeys(t,i[n]);for(s in a)a.hasOwnProperty(s)&&(l[s]=a[s])}return l},e.createTemplate=function(i){var r={};if("object"==typeof i&&"ViewMachine"===i.type){if(r.element=i.element,t.isEmptyObject(i.style)||(r.style=i.style),void 0!==i.id&&(r.id=i.id),!t.isEmptyObject(i.properties))for(var n in i.properties)void 0!==i.properties[n]&&"id"!==n&&(r.properties=r.properties||{},r.properties[n]=i.properties[n]);if(!i.children.length||void 0!==i.preserve&&i.preserve!==!0)i.preserve===!1&&(r.preserve=!1);else{r.children=[];for(var s in i.children)"object"==typeof i&&"ViewMachine"===i.type&&r.children.push(e.createTemplate(i.children[s]))}if(e.properties[i.element])for(var a in e.properties[i.element])"object"==typeof i[e.properties[i.element][a]]?(r[e.properties[i.element][a]]=Array.isArray(i[e.properties[i.element][a]])?[]:{},t.extend(r[e.properties[i.element][a]],i[e.properties[i.element][a]])):r[e.properties[i.element][a]]=i[e.properties[i.element][a]];if(i.events.length){r.events=[];for(var l in i.events)"string"==typeof i.events[l].callback&&r.events.push({event:i.events[l].event,callback:i.events[l].callback})}return r}return!1},e.construct=function(i){var r;if(i.preserve===!1)r=new(e[i.element.substring(0,1).toUpperCase()+i.element.substring(1,i.element.length)])(i[e.properties[i.element][0]],i[e.properties[i.element][1]],i[e.properties[i.element][2]],i[e.types[i.element][3]]);else{if(r=new e.El(i.element,i.properties),e.properties[r.element])for(var n in e.properties[r.element])"object"==typeof r[e.properties[r.element][n]]?(r[e.properties[r.element][n]]={},t.extend(r[e.properties[r.element][n]],i[e.properties[r.element][n]])):r[e.properties[r.element][n]]=i[e.properties[r.element][n]];e.types[r.element]&&t.extend(r,e.types[r.element])}for(var s in i.children)r.append(e.construct(i.children[s]));return i.style&&(r.style=i.style),void 0!==i.id&&(r.id=i.id),void 0!==i.events&&(r.events=i.events),r},e.jsonTemplate=function(t){if("string"==typeof t){var i=JSON.parse(t);return e.construct(i)}return"object"==typeof t&&"ViewMachine"===t.type&&(t=e.createTemplate(t)),JSON.stringify(t)},e}(ViewMachine,jQuery),void 0===ViewMachine)var ViewMachine={};if(void 0===jQuery)console.log("Please add JS dependecy jQuery before loading this file.");else var $=jQuery;if(ViewMachine=function(e){"use strict";return e.titles={example:"Example"},e.cleanTitles=function(e,t){var i,r;if(void 0!==t)return this.titles[e]=t,void 0;if(void 0===this.titles[e]&&e.length){for(r=e.toLowerCase().replace(/_/g," ").split(" "),i=0;r.length>i;i+=1)void 0!==this.titles[r[i]]&&(r[i]=this.titles[r[i]]),r[i]=r[i][0].toUpperCase()+r[i].substring(1);r=r.join(" ")}else r=e.length?this.titles[e]:e;return r},e.makeElement=function(e,t,i,r,n,s){var a,l,o,p;if(n=void 0!==n?n:"",r=void 0!==r?r:"",t=void 0!==t?t:"",p={},t.length&&(p["class"]=t),(r.length||n.length||"number"==typeof r||"number"==typeof n)&&(p.id=r+n),void 0!==i&&(null!==i&&19===i.length&&(a=i.replace(/\D/g," "),a=a.split(" "),6===a.length&&(i=new Date(a[0],a[1]-1,a[2],a[3],a[4],a[5]).toDateString())),p.text=i),l=$("<"+e+">",p),"object"==typeof s)for(o in s)s.hasOwnProperty(o)&&l.attr(o,s[o]);return l},e.makeList=function(t,i){var r,n,s,a,l,o;if(i=void 0!==i?i:e.makeElement("ul","list"),"[object Array]"!==Object.prototype.toString.call(t))for(r in t)t.hasOwnProperty(r)&&("object"!=typeof t[r]?(n=e.makeElement("li","item",t[r],r),i.append(n)):null!==t[r]&&(s=e.makeElement("ul",r.split(" ")[0]+" list"),i.append(s),n=e.makeElement("h3","title",e.cleanTitles(r)),s.append(n),e.makeList(t[r],s)));else if("object"!=typeof t[0])for(o=void 0!==i?i.attr("id"):"item",a=void 0!==i?i.attr("class"):"item",l=0;t.length>l;l+=1)n=e.makeElement("li",a,t[l],o,l+1),i.append(n);else for(l=0;t.length>l;l+=1)i.append(e.makeList(t[l],i));return i},e.makeCells=function(t,i,r){var n,s,a,l,o={};for(a in t)if(t.hasOwnProperty(a))if("object"!=typeof t[a]&&"[object Array]"!==Object.prototype.toString.call(t[a])&&-1!==r.indexOf(a))o[a]=null===t[a]?e.makeElement("td","none",""):e.makeElement("td",a,t[a]);else if("[object Array]"===Object.prototype.toString.call(t[a]))l=t[a].join(", "),o[a]=e.makeElement("td",a,l);else if("object"==typeof t[a]){n=e.makeCells(t[a],i,r);for(s in n)n.hasOwnProperty(s)&&(o[s]=n[s])}return o},e.makeTable=function(t,i){function r(t){return e.makeElement("tr",t)}var n,s,a,l,o,p,c;for(n=e.makeElement("table","classic"),o=r("title"),s=0;t.length>s;s+=1)a=e.cleanTitles(t[s]),o.append(e.makeElement("th",t[s],a));c=e.makeElement("thead"),c.append(o),n.append(c);for(l in i)if(i.hasOwnProperty(l)){for(o=r("row"),p=e.makeCells(i[l],o,t),s=0;t.length>s;s+=1)p.hasOwnProperty(t[s])?o.append(p[t[s]]):o.append(e.makeElement("td",t[s]+" none",""));n.append(o)}return n},e.makeForm=function(t){var i,r,n,s,a,l,o,p,c,h,d,m,f;for(i=void 0===t.fieldsetName?void 0!==t.formName?t.formName:"":t.fieldsetName,r=e.makeElement("fieldset",i),n=t.form,c=0;n.length>c;c+=1){switch(d=n[c].hasOwnProperty("name")?n[c].name:n[c].label,m=n[c].hasOwnProperty("cssClass")?n[c].cssClass:n[c].elementType,n[c].elementType){case"input":case"textarea":a=e.cleanTitles(n[c].label),r.append(e.makeElement("label",m,a+":","","",{"for":d})),l=["<"+n[c].elementType+' name="'+d+'"'+' id="'+d+'"'+" />"],r.append(l);break;case"checkbox":case"radio":for(h=0;n[c].options.length>h;h+=1)a=e.cleanTitles(n[c].options[h]),r.append(e.makeElement("label",m,a+":","","",{"for":n[c].options[h]})),f={type:n[c].elementType,name:"radio"===n[c].elementType?d:n[c].options[h]},f.value=void 0!==n[c].value?n[c].value[h]:n[c].options[h],n[c].selected===n[c].options[h]&&(f.checked="checked"),r.append(e.makeElement("input",m,"",n[c].options[h],"",f));break;case"select multiple":case"select":if(a=e.cleanTitles(n[c].label),r.append(e.makeElement("label",m,a+":","","",{"for":d})),s=e.makeElement("select",d,"",d,"","select multiple"===n[c].elementType?{multiple:"multiple"}:""),void 0!==n[c].options)for(h=0;n[c].options.length>h;h+=1)f={},f.value=void 0!==n[c].value?n[c].value[h]:n[c].options[h],n[c].selected===n[c].options[h]&&(f.selected="selected"),s.append(e.makeElement("option",m,n[c].options[h],f.value,"",f));r.append(s);break;case"button":a=e.cleanTitles(n[c].text),r.append(e.makeElement("button",m,a,d,"",{onclick:n[c].onclick}))}r.append("<br />")}return t.formName?(t.action&&t.formName&&(o={action:t.action,method:t.method}),p=e.makeElement("form",t.formName,"","","",o),p.append(r)):r},e.exampleForm={action:"",method:"",formName:"MyForm",fieldsetName:"myFields",form:[{name:"myField",label:"My Fav Textarea",elementType:"textarea",defaultText:"Prefill text...",cssClass:"customClass"},{name:"myField",label:"My Fav Textarea",elementType:"input",defaultText:"Prefill text..."},{label:"label2",elementType:"radio",options:["Male","Female"],selected:"Female",value:["m","f"]},{label:"label2",elementType:"checkbox",options:["Male","Female"],selected:"Female",value:["m","f"]},{name:"selectBox",label:"My Select Box",elementType:"select",options:["opt1","opt2","opt3"],selected:"opt2",value:[1,2,3]},{name:"selectBox2",label:"Same - No Values or selected specified",elementType:"select",options:["opt1","opt2","opt3"]},{name:"multipleSelect",label:"Same - No Values or selected specified",elementType:"select multiple",options:["opt1","opt2","opt3"]},{label:"myButton",elementType:"button",text:"Submit yourself!",onclick:"alert('I will not submit to you'); return false;"}]},e.exampleList=["Apples","Pears","Limes","Oranges","Plums"],e.exampleTable={keyList:["Apples","Pears","Limes","Oranges","Plums"],data:{fruits1:{Apples:10,Pears:20,Limes:100,Oranges:15,Plums:4},fruits2:{Apples:2,Pears:4,Limes:8,Oranges:16,Plums:32},fruits3:{Apples:64,Pears:128,Limes:256,Plums:1024}}},e}(ViewMachine),void 0===ViewMachine)var ViewMachine={};ViewMachine=function(e,t){"use strict";return e.types={},e.properties={},e.List=function(t){var i="ul",r=t;return t.parent&&(i={type:"ul",properties:t.parent},r=t.children),e.ParentEl(i,"li",r)},e.Select=function(t){var i="select",r=t;return t.parent&&(i={type:"select",properties:t.parent},r=t.children),e.ParentEl(i,"option",r)},e.Table=function(i,r,n){var s,a,l=new e.El("table"),o=new e.El("thead"),p=new e.El("tbody"),c=r.length,h=n||r;l.currentHeadings=h,o.append(new e.ParentEl("tr","th",h));for(var d in i)if(i.hasOwnProperty(d)){s=new e.El("tr");for(var m=0;c>m;m++)a=i[d][r[m]],Array.isArray(a)&&(a=a.join(", ")),s.append(new e.El("td",{text:a}));p.append(s)}return l.children.push(o),l.append(p),l.currentData={},l.preserve=!1,t.extend(l.currentData,i),l.keys=r,t.extend(l,e.types.table),l},e.properties.table=["currentData","keys","currentHeadings"],e.types.table={data:function(t){var i,r,n=this.keys.length,s=0,a=0,l={};for(var o in this.currentData)void 0===t[o]?a++:(a>0&&this.children[1].splice(s,a),s++,a=0);a>0&&this.children[1].splice(s,a),s=0;for(var p in t)if(t.hasOwnProperty(p)){if(l[p]=t[p],this.currentData.hasOwnProperty(p)){if(JSON.stringify(this.currentData[p])!==JSON.stringify(t[p]))for(var c=0;n>c;c++)t[p].hasOwnProperty(keys[c])&&t[p][keys[c]]!==this.currentData[p][this.keys[c]]&&this.cell(s,c).text(t[p][this.keys[c]])}else{i=new e.El("tr");for(var h=0;n>h;h++)t[p].hasOwnProperty(this.keys[h])?(r=t[p][this.keys[h]],Array.isArray(r)&&(r=r.join(", ")),i.append(new e.El("td",{text:r}))):i.append(new e.El("td"));this.children[1].splice(s,0,i)}s++}return this.currentData=l,this},headings:function(i,r){this.currentHeadings=r||i;var n={};return t.extend(n,this.currentData),this.children[0].splice(0,1,new e.ParentEl("tr","th",this.currentHeadings)),this.data([]),this.keys=i,this.data(n),this},cell:function(e,t){return this.children[1].children[e].children[t]}},e.Video=function(t,i,r){var n=new e.El("video",r);for(var s in t)n.append(new e.El("source",{src:i+"."+t[s],type:"video/"+t[s]}));return n},e}(ViewMachine,jQuery);