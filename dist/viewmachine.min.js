/*! viewmachine 29-01-2014 */
if(void 0===ViewMachine)var ViewMachine={};if(ViewMachine=function(e){"use strict";var t;return t=function(i,n){var r,a,s,l,o,p;if("[object Array]"===Object.prototype.toString.call(i))for(r=0;i.length>r;r+=1)n.append(t(i[r],n));else if("string"==typeof i)e.makeElement(i);else for(a in i)if(i.hasOwnProperty(a)){switch(-1!==a.indexOf(":")&&(s=a.split(":")),l=void 0!==s?s[0]:a){case"div":o=e.makeElement(void 0!==s?s[0]:a,void 0!==s?s[1]:""),o.append(t(i[a],o));break;case"form":o=e.makeForm(i[a]);break;case"list":o=e.makeList(i[a]);break;case"table":o=e.makeTable(i[a].keyList,i[a].data);break;case"b":case"p":o=e.makeElement(void 0!==s?s[0]:a,void 0!==s?s[1]:""),"[object Array]"!==Object.prototype.toString.call(i[a])&&o.append(i[a]);break;case"img":o=["<img "+(void 0!==s?'class="'+s[1]+'" ':"")+'src="'+i[a]+'" '+(void 0!==s?'title="'+s[1]+'" ':"")+'alt="'+(void 0!==s?s[1]:i[a])+'" />'];break;case"h1":case"h2":case"h3":case"h4":o=e.makeElement(void 0!==s?s[0]:a,void 0!==s?s[1]:""),o.append(e.cleanTitles(i[a]));break;default:o=e.makeElement(void 0!==s?s[0]:a,void 0!==s?s[1]:""),o.append(p)}void 0!==o&&n.append(o)}return n},e.build=function(i){var n,r;return n=i.name,r=e.makeElement("div",n+" view"),r=t(i.structure,r)},e.example={name:"example",structure:[{h1:"The Title"},{div:{div:{p:'This is an <a href="#">example<a/> of paragraph text<br>squirted into a document with <b>inner HTML</b> '},form:e.exampleForm}},{"div:myClass":[{h3:"Sub-title"},{"p:green":"This is a list of paragraphs"}]}]},e}(ViewMachine),void 0===ViewMachine)var ViewMachine={};if(void 0===jQuery&&console.log("Please add JS dependecy jQuery before loading this file."),ViewMachine=function(e,t){"use strict";var i=[];return e.El=function(e,t){return this.element=e,void 0===t&&(t={}),t.id&&(this.id=t.id),this.drawn=!1,this.properties=t,this.children=[],this.events=[],this.style={},this},e.El.prototype={text:function(e){return this.properties.text=e,this.drawn&&this.draw(),this},getId:function(){return this.id?this.id:""+Math.floor(1e7*Math.random()+1)},HTML:function(e){this.drawn||(this.properties.id=this.getId()),e&&(this.drawn=!0);var n=t("<"+this.element+">",this.properties);for(var r in this.children)t(n).append(this.children[r].HTML(e));for(var a in this.events)this.events[a].id=this.properties.id,i.push(this.events[a]);return n},draw:function(){if(i=[],this.drawn)this.replace(this.HTML(!0));else{var e=this.HTML(!0);if("string"==typeof this.parent)t(this.parent).append(e),this.drawn=!0;else{if(this.parent.drawn!==!0)throw"DrawError: Parent element not on page";t("#"+this.parent.properties.id).append(e),this.drawn=!0}}for(var n=i.length,r=0;n>r;r++)t("#"+i[r].id).on(i[r].event,i[r].callback);return this},remove:function(){if(this.drawn&&(t("#"+this.properties.id).remove(),this.drawn=!1),this.properties.id=this.getId(),"string"!=typeof this.parent){this.getId();var e=this.parent.children;for(var i in e)e[i].properties.id===this.properties.id&&this.parent.children.splice(i,1)}return this},replace:function(e){return this.drawn?(t("#"+this.properties.id).replaceWith(e),this):void 0},hide:function(){return this.drawn&&(t("#"+this.properties.id).remove(),this.drawn=!1),this},append:function(e){return e.parent=this,this.children.push(e),this.drawn&&e.draw(),this},prepend:function(e){return e.parent=this,this.children=[e].concat(this.children),this.drawn&&this.draw(),this},splice:function(e,t,i){return i?(i.parent=this,this.children.splice(e,t,i)):this.children.splice(e,t),this.drawn&&this.draw(),this},css:function(e,t){if("string"==typeof e){if(void 0===t)return i[t];this.style[e]=t}else this.style=e;var i="";for(var n in this.style)i+=n+": "+this.style[n]+"; ";return this.properties.style=i,this.drawn&&this.draw(),this},event:function(e,i){this.events.push({event:e,callback:i}),this.drawn&&t("#"+this.properties.id).on(e,i)},parent:"body",type:"ViewMachine"},e.ParentEl=function(t,i,n){var r,a,s=t;if(t.properties&&(a=t.properties,s=t.type),r=new e.El(s,a),"number"==typeof n)for(var l=0;n>l;l++)r.append(new e.El(i));else if(Array.isArray(n)){var o;for(var p in n)o="object"==typeof n[p]?"ViewMachine"===n[p].type?n[p]:new e.El(i,n[p]):new e.El(i,{text:n[p]}),r.append(o)}return r},e.List=function(t){var i="ul",n=t;return t.parent&&(i={type:"ul",properties:t.parent},n=t.children),e.ParentEl(i,"li",n)},e.Select=function(t){var i="select",n=t;return t.parent&&(i={type:"select",properties:t.parent},n=t.children),e.ParentEl(i,"option",n)},e.Table=function(i,n){var r,a=new e.El("table"),s=new e.El("thead"),l=new e.El("tbody"),o=i.length;s.append(new e.ParentEl("tr","th",i));for(var p in n)if(n.hasOwnProperty(p)){r=new e.El("tr");for(var c=0;o>c;c++)r.append(new e.El("td",{text:n[p][i[c]]}));l.append(r)}return a.children.push(s),a.append(l),a.currentData={},t.extend(a.currentData,n),a.keys=i,a.data=function(n){var r,a=0;for(var s in this.currentData)void 0===n[s]?this.children[1].splice(a,1):a++;a=0;for(var l in n)if(n.hasOwnProperty(l)){if(this.currentData.hasOwnProperty(l)){if(JSON.stringify(this.currentData[l])!==JSON.stringify(n[l]))for(var p=0;o>p;p++)n[l].hasOwnProperty(i[p])&&n[l][i[p]]!==this.currentData[l][i[p]]&&this.cell(a,p).text(n[l][i[p]])}else{r=[];for(var c=0;o>c;c++)n[l].hasOwnProperty(i[c])?r.push(n[l][i[c]]):r.push(void 0);this.children[1].splice(a,0,new e.ParentEl("tr","td",r))}a++}return this.currentData={},t.extend(this.currentData,n),this},a.cell=function(e,t){return this.children[1].children[e].children[t]},a},e.getKeys=function(t,i){var n,r,a,s,l={};for(r in i)if(i.hasOwnProperty(r))if("[object Array]"!==Object.prototype.toString.call(i[r])&&-1!==t.indexOf(r))if("object"==typeof i[r]){n=[];for(a in i[r])i[r].hasOwnProperty(a)&&n.push(a);l[r]=n.join(", "),s=e.getKeys(t,i[r]);for(a in s)s.hasOwnProperty(a)&&(l[a]=s[a])}else l[r]=i[r];else if(i.hasOwnProperty(r)&&"[object Array]"===Object.prototype.toString.call(i[r]))l[r]=i[r].join(", ");else if("object"==typeof i[r]){s=e.getKeys(t,i[r]);for(a in s)s.hasOwnProperty(a)&&(l[a]=s[a])}return l},e}(ViewMachine,jQuery),void 0===ViewMachine)var ViewMachine={};if(void 0===jQuery)console.log("Please add JS dependecy jQuery before loading this file.");else var $=jQuery;ViewMachine=function(e){"use strict";return e.titles={example:"Example"},e.cleanTitles=function(e,t){var i,n;if(void 0!==t)return this.titles[e]=t,void 0;if(void 0===this.titles[e]&&e.length){for(n=e.toLowerCase().replace(/_/g," ").split(" "),i=0;n.length>i;i+=1)void 0!==this.titles[n[i]]&&(n[i]=this.titles[n[i]]),n[i]=n[i][0].toUpperCase()+n[i].substring(1);n=n.join(" ")}else n=e.length?this.titles[e]:e;return n},e.makeElement=function(e,t,i,n,r,a){var s,l,o,p;if(r=void 0!==r?r:"",n=void 0!==n?n:"",t=void 0!==t?t:"",p={},t.length&&(p["class"]=t),(n.length||r.length||"number"==typeof n||"number"==typeof r)&&(p.id=n+r),void 0!==i&&(null!==i&&19===i.length&&(s=i.replace(/\D/g," "),s=s.split(" "),6===s.length&&(i=new Date(s[0],s[1]-1,s[2],s[3],s[4],s[5]).toDateString())),p.text=i),l=$("<"+e+">",p),"object"==typeof a)for(o in a)a.hasOwnProperty(o)&&l.attr(o,a[o]);return l},e.makeList=function(t,i){var n,r,a,s,l,o;if(i=void 0!==i?i:e.makeElement("ul","list"),"[object Array]"!==Object.prototype.toString.call(t))for(n in t)t.hasOwnProperty(n)&&("object"!=typeof t[n]?(r=e.makeElement("li","item",t[n],n),i.append(r)):null!==t[n]&&(a=e.makeElement("ul",n.split(" ")[0]+" list"),i.append(a),r=e.makeElement("h3","title",e.cleanTitles(n)),a.append(r),e.makeList(t[n],a)));else if("object"!=typeof t[0])for(o=void 0!==i?i.attr("id"):"item",s=void 0!==i?i.attr("class"):"item",l=0;t.length>l;l+=1)r=e.makeElement("li",s,t[l],o,l+1),i.append(r);else for(l=0;t.length>l;l+=1)i.append(e.makeList(t[l],i));return i},e.makeCells=function(t,i,n){var r,a,s,l,o={};for(s in t)if(t.hasOwnProperty(s))if("object"!=typeof t[s]&&"[object Array]"!==Object.prototype.toString.call(t[s])&&-1!==n.indexOf(s))o[s]=null===t[s]?e.makeElement("td","none",""):e.makeElement("td",s,t[s]);else if("[object Array]"===Object.prototype.toString.call(t[s]))l=t[s].join(", "),o[s]=e.makeElement("td",s,l);else if("object"==typeof t[s]){r=e.makeCells(t[s],i,n);for(a in r)r.hasOwnProperty(a)&&(o[a]=r[a])}return o},e.makeTable=function(t,i){function n(t){return e.makeElement("tr",t)}var r,a,s,l,o,p,c;for(r=e.makeElement("table","classic"),o=n("title"),a=0;t.length>a;a+=1)s=e.cleanTitles(t[a]),o.append(e.makeElement("th",t[a],s));c=e.makeElement("thead"),c.append(o),r.append(c);for(l in i)if(i.hasOwnProperty(l)){for(o=n("row"),p=e.makeCells(i[l],o,t),a=0;t.length>a;a+=1)p.hasOwnProperty(t[a])?o.append(p[t[a]]):o.append(e.makeElement("td",t[a]+" none",""));r.append(o)}return r},e.makeForm=function(t){var i,n,r,a,s,l,o,p,c,d,h,m,f;for(i=void 0===t.fieldsetName?void 0!==t.formName?t.formName:"":t.fieldsetName,n=e.makeElement("fieldset",i),r=t.form,c=0;r.length>c;c+=1){switch(h=r[c].hasOwnProperty("name")?r[c].name:r[c].label,m=r[c].hasOwnProperty("cssClass")?r[c].cssClass:r[c].elementType,r[c].elementType){case"input":case"textarea":s=e.cleanTitles(r[c].label),n.append(e.makeElement("label",m,s+":","","",{"for":h})),l=["<"+r[c].elementType+' name="'+h+'"'+' id="'+h+'"'+" />"],n.append(l);break;case"checkbox":case"radio":for(d=0;r[c].options.length>d;d+=1)s=e.cleanTitles(r[c].options[d]),n.append(e.makeElement("label",m,s+":","","",{"for":r[c].options[d]})),f={type:r[c].elementType,name:"radio"===r[c].elementType?h:r[c].options[d]},f.value=void 0!==r[c].value?r[c].value[d]:r[c].options[d],r[c].selected===r[c].options[d]&&(f.checked="checked"),n.append(e.makeElement("input",m,"",r[c].options[d],"",f));break;case"select multiple":case"select":if(s=e.cleanTitles(r[c].label),n.append(e.makeElement("label",m,s+":","","",{"for":h})),a=e.makeElement("select",h,"",h,"","select multiple"===r[c].elementType?{multiple:"multiple"}:""),void 0!==r[c].options)for(d=0;r[c].options.length>d;d+=1)f={},f.value=void 0!==r[c].value?r[c].value[d]:r[c].options[d],r[c].selected===r[c].options[d]&&(f.selected="selected"),a.append(e.makeElement("option",m,r[c].options[d],f.value,"",f));n.append(a);break;case"button":s=e.cleanTitles(r[c].text),n.append(e.makeElement("button",m,s,h,"",{onclick:r[c].onclick}))}n.append("<br />")}return t.formName?(t.action&&t.formName&&(o={action:t.action,method:t.method}),p=e.makeElement("form",t.formName,"","","",o),p.append(n)):n},e.exampleForm={action:"",method:"",formName:"MyForm",fieldsetName:"myFields",form:[{name:"myField",label:"My Fav Textarea",elementType:"textarea",defaultText:"Prefill text...",cssClass:"customClass"},{name:"myField",label:"My Fav Textarea",elementType:"input",defaultText:"Prefill text..."},{label:"label2",elementType:"radio",options:["Male","Female"],selected:"Female",value:["m","f"]},{label:"label2",elementType:"checkbox",options:["Male","Female"],selected:"Female",value:["m","f"]},{name:"selectBox",label:"My Select Box",elementType:"select",options:["opt1","opt2","opt3"],selected:"opt2",value:[1,2,3]},{name:"selectBox2",label:"Same - No Values or selected specified",elementType:"select",options:["opt1","opt2","opt3"]},{name:"multipleSelect",label:"Same - No Values or selected specified",elementType:"select multiple",options:["opt1","opt2","opt3"]},{label:"myButton",elementType:"button",text:"Submit yourself!",onclick:"alert('I will not submit to you'); return false;"}]},e.exampleList=["Apples","Pears","Limes","Oranges","Plums"],e.exampleTable={keyList:["Apples","Pears","Limes","Oranges","Plums"],data:{fruits1:{Apples:10,Pears:20,Limes:100,Oranges:15,Plums:4},fruits2:{Apples:2,Pears:4,Limes:8,Oranges:16,Plums:32},fruits3:{Apples:64,Pears:128,Limes:256,Plums:1024}}},e}(ViewMachine);