/*! viewmachine 16-01-2014 */
if(void 0===ViewMachine)var ViewMachine={};if(ViewMachine=function(e){"use strict";var t;return t=function(i,a){var n,r,l,s,o,p;if("[object Array]"===Object.prototype.toString.call(i))for(n=0;i.length>n;n+=1)a.append(t(i[n],a));else if("string"==typeof i)e.makeElement(i);else for(r in i)if(i.hasOwnProperty(r)){switch(-1!==r.indexOf(":")&&(l=r.split(":")),s=void 0!==l?l[0]:r){case"div":o=e.makeElement(void 0!==l?l[0]:r,void 0!==l?l[1]:""),o.append(t(i[r],o));break;case"form":o=e.makeForm(i[r]);break;case"list":o=e.makeList(i[r]);break;case"table":o=e.makeTable(i[r].keyList,i[r].data);break;case"b":case"p":o=e.makeElement(void 0!==l?l[0]:r,void 0!==l?l[1]:""),"[object Array]"!==Object.prototype.toString.call(i[r])&&o.append(i[r]);break;case"img":o=["<img "+(void 0!==l?'class="'+l[1]+'" ':"")+'src="'+i[r]+'" '+(void 0!==l?'title="'+l[1]+'" ':"")+'alt="'+(void 0!==l?l[1]:i[r])+'" />'];break;case"h1":case"h2":case"h3":case"h4":o=e.makeElement(void 0!==l?l[0]:r,void 0!==l?l[1]:""),o.append(e.cleanTitles(i[r]));break;default:o=e.makeElement(void 0!==l?l[0]:r,void 0!==l?l[1]:""),o.append(p)}void 0!==o&&a.append(o)}return a},e.build=function(i){var a,n;return a=i.name,n=e.makeElement("div",a+" view"),n=t(i.structure,n)},e.example={name:"example",structure:[{h1:"The Title"},{div:{div:{p:'This is an <a href="#">example<a/> of paragraph text<br>squirted into a document with <b>inner HTML</b> '},form:e.exampleForm}},{"div:myClass":[{h3:"Sub-title"},{"p:green":"This is a list of paragraphs"}]}]},e}(ViewMachine),void 0===ViewMachine)var ViewMachine={};if(void 0===jQuery)console.log("Please add JS dependecy jQuery before loading this file.");else var $=jQuery;ViewMachine=function(e){"use strict";return e.El=function(e,t){return this.element=e,void 0===t&&(t={}),this.drawn=!1,this.properties=t,this.children=[],this},e.El.prototype={getId:function(){return""+Math.floor(1e7*Math.random()+1)},HTML:function(e){this.drawn||(this.properties.id=this.getId()),e&&(this.drawn=!0);var t=$("<"+this.element+">",this.properties);for(var i in this.children)$(t).append(this.children[i].HTML(e));return t},draw:function(){if(this.drawn)this.replace(this.HTML(!0));else{var e=this.HTML(!0);if("string"==typeof this.parent)$(this.parent).append(e),this.drawn=!0;else{if(this.parent.drawn!==!0)throw"DrawError: Parent element not on page";$("#"+this.parent.properties.id).append(e),this.drawn=!0}}return this},remove:function(){if(this.drawn&&($("#"+this.properties.id).remove(),this.drawn=!1),this.properties.id=this.getId(),"string"!=typeof this.parent){this.getId();var e=this.parent.children;for(var t in e)e[t].properties.id===this.properties.id&&this.parent.children.splice(t,1)}return this},replace:function(e){return this.drawn?($("#"+this.properties.id).replaceWith(e),this):void 0},hide:function(){return this.drawn&&($("#"+this.properties.id).remove(),this.drawn=!1),this},append:function(e){return e.parent=this,this.children.push(e),this.drawn&&e.draw(),this},prepend:function(e){return e.parent=this,this.children=[e].concat(this.children),this.drawn&&this.draw(),this},splice:function(e,t,i){return i?(i.parent=this,this.children.splice(e,t,i)):this.children.splice(e,t),this.drawn&&this.draw(),this},parent:"body"},e.List=function(t){var i=new e.El("ul");for(var a in t)i.append(new e.El("li",{text:t[a]}));return i},e.titles={example:"Example"},e.cleanTitles=function(e,t){var i,a;if(void 0!==t)return this.titles[e]=t,void 0;if(void 0===this.titles[e]&&e.length){for(a=e.toLowerCase().replace(/_/g," ").split(" "),i=0;a.length>i;i+=1)void 0!==this.titles[a[i]]&&(a[i]=this.titles[a[i]]),a[i]=a[i][0].toUpperCase()+a[i].substring(1);a=a.join(" ")}else a=e.length?this.titles[e]:e;return a},e.makeElement=function(e,t,i,a,n,r){var l,s,o,p;if(n=void 0!==n?n:"",a=void 0!==a?a:"",t=void 0!==t?t:"",p={},t.length&&(p["class"]=t),(a.length||n.length||"number"==typeof a||"number"==typeof n)&&(p.id=a+n),void 0!==i&&(null!==i&&19===i.length&&(l=i.replace(/\D/g," "),l=l.split(" "),6===l.length&&(i=new Date(l[0],l[1]-1,l[2],l[3],l[4],l[5]).toDateString())),p.text=i),s=$("<"+e+">",p),"object"==typeof r)for(o in r)r.hasOwnProperty(o)&&s.attr(o,r[o]);return s},e.makeList=function(t,i){var a,n,r,l,s,o;if(i=void 0!==i?i:e.makeElement("ul","list"),"[object Array]"!==Object.prototype.toString.call(t))for(a in t)t.hasOwnProperty(a)&&("object"!=typeof t[a]?(n=e.makeElement("li","item",t[a],a),i.append(n)):null!==t[a]&&(r=e.makeElement("ul",a.split(" ")[0]+" list"),i.append(r),n=e.makeElement("h3","title",e.cleanTitles(a)),r.append(n),e.makeList(t[a],r)));else if("object"!=typeof t[0])for(o=void 0!==i?i.attr("id"):"item",l=void 0!==i?i.attr("class"):"item",s=0;t.length>s;s+=1)n=e.makeElement("li",l,t[s],o,s+1),i.append(n);else for(s=0;t.length>s;s+=1)i.append(e.makeList(t[s],i));return i},e.makeCells=function(t,i,a){var n,r,l,s,o={};for(l in t)if(t.hasOwnProperty(l))if("object"!=typeof t[l]&&"[object Array]"!==Object.prototype.toString.call(t[l])&&-1!==a.indexOf(l))o[l]=null===t[l]?e.makeElement("td","none",""):e.makeElement("td",l,t[l]);else if("[object Array]"===Object.prototype.toString.call(t[l]))s=t[l].join(", "),o[l]=e.makeElement("td",l,s);else if("object"==typeof t[l]){n=e.makeCells(t[l],i,a);for(r in n)n.hasOwnProperty(r)&&(o[r]=n[r])}return o},e.makeTable=function(t,i){function a(t){return e.makeElement("tr",t)}var n,r,l,s,o,p,m;for(n=e.makeElement("table","classic"),o=a("title"),r=0;t.length>r;r+=1)l=e.cleanTitles(t[r]),o.append(e.makeElement("th",t[r],l));m=e.makeElement("thead"),m.append(o),n.append(m);for(s in i)if(i.hasOwnProperty(s)){for(o=a("row"),p=e.makeCells(i[s],o,t),r=0;t.length>r;r+=1)p.hasOwnProperty(t[r])?o.append(p[t[r]]):o.append(e.makeElement("td",t[r]+" none",""));n.append(o)}return n},e.getKeys=function(t,i){var a,n,r,l,s={};for(n in i)if(i.hasOwnProperty(n))if("[object Array]"!==Object.prototype.toString.call(i[n])&&-1!==t.indexOf(n))if("object"==typeof i[n]){a=[];for(r in i[n])i[n].hasOwnProperty(r)&&a.push(r);s[n]=a.join(", "),l=e.getKeys(t,i[n]);for(r in l)l.hasOwnProperty(r)&&(s[r]=l[r])}else s[n]=i[n];else if(i.hasOwnProperty(n)&&"[object Array]"===Object.prototype.toString.call(i[n]))s[n]=i[n].join(", ");else if("object"==typeof i[n]){l=e.getKeys(t,i[n]);for(r in l)l.hasOwnProperty(r)&&(s[r]=l[r])}return s},e.makeForm=function(t){var i,a,n,r,l,s,o,p,m,d,c,h,f;for(i=void 0===t.fieldsetName?void 0!==t.formName?t.formName:"":t.fieldsetName,a=e.makeElement("fieldset",i),n=t.form,m=0;n.length>m;m+=1){switch(c=n[m].hasOwnProperty("name")?n[m].name:n[m].label,h=n[m].hasOwnProperty("cssClass")?n[m].cssClass:n[m].elementType,n[m].elementType){case"input":case"textarea":l=e.cleanTitles(n[m].label),a.append(e.makeElement("label",h,l+":","","",{"for":c})),s=["<"+n[m].elementType+' name="'+c+'"'+' id="'+c+'"'+" />"],a.append(s);break;case"checkbox":case"radio":for(d=0;n[m].options.length>d;d+=1)l=e.cleanTitles(n[m].options[d]),a.append(e.makeElement("label",h,l+":","","",{"for":n[m].options[d]})),f={type:n[m].elementType,name:"radio"===n[m].elementType?c:n[m].options[d]},f.value=void 0!==n[m].value?n[m].value[d]:n[m].options[d],n[m].selected===n[m].options[d]&&(f.checked="checked"),a.append(e.makeElement("input",h,"",n[m].options[d],"",f));break;case"select multiple":case"select":if(l=e.cleanTitles(n[m].label),a.append(e.makeElement("label",h,l+":","","",{"for":c})),r=e.makeElement("select",c,"",c,"","select multiple"===n[m].elementType?{multiple:"multiple"}:""),void 0!==n[m].options)for(d=0;n[m].options.length>d;d+=1)f={},f.value=void 0!==n[m].value?n[m].value[d]:n[m].options[d],n[m].selected===n[m].options[d]&&(f.selected="selected"),r.append(e.makeElement("option",h,n[m].options[d],f.value,"",f));a.append(r);break;case"button":l=e.cleanTitles(n[m].text),a.append(e.makeElement("button",h,l,c,"",{onclick:n[m].onclick}))}a.append("<br />")}return t.formName?(t.action&&t.formName&&(o={action:t.action,method:t.method}),p=e.makeElement("form",t.formName,"","","",o),p.append(a)):a},e.exampleForm={action:"",method:"",formName:"MyForm",fieldsetName:"myFields",form:[{name:"myField",label:"My Fav Textarea",elementType:"textarea",defaultText:"Prefill text...",cssClass:"customClass"},{name:"myField",label:"My Fav Textarea",elementType:"input",defaultText:"Prefill text..."},{label:"label2",elementType:"radio",options:["Male","Female"],selected:"Female",value:["m","f"]},{label:"label2",elementType:"checkbox",options:["Male","Female"],selected:"Female",value:["m","f"]},{name:"selectBox",label:"My Select Box",elementType:"select",options:["opt1","opt2","opt3"],selected:"opt2",value:[1,2,3]},{name:"selectBox2",label:"Same - No Values or selected specified",elementType:"select",options:["opt1","opt2","opt3"]},{name:"multipleSelect",label:"Same - No Values or selected specified",elementType:"select multiple",options:["opt1","opt2","opt3"]},{label:"myButton",elementType:"button",text:"Submit yourself!",onclick:"alert('I will not submit to you'); return false;"}]},e.exampleList=["Apples","Pears","Limes","Oranges","Plums"],e.exampleTable={keyList:["Apples","Pears","Limes","Oranges","Plums"],data:{fruits1:{Apples:10,Pears:20,Limes:100,Oranges:15,Plums:4},fruits2:{Apples:2,Pears:4,Limes:8,Oranges:16,Plums:32},fruits3:{Apples:64,Pears:128,Limes:256,Plums:1024}}},e}(ViewMachine);