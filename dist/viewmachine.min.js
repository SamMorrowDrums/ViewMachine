/*! viewmachine 14-01-2014 */
if(void 0===ViewMachine)var ViewMachine={};if(ViewMachine=function(e){"use strict";var t;return t=function(a,n){var i,l,o,r,s,p;if("[object Array]"===Object.prototype.toString.call(a))for(i=0;a.length>i;i+=1)n.append(t(a[i],n));else if("string"==typeof a)e.makeElement(a);else for(l in a)if(a.hasOwnProperty(l)){switch(-1!==l.indexOf(":")&&(o=l.split(":")),r=void 0!==o?o[0]:l){case"div":s=e.makeElement(void 0!==o?o[0]:l,void 0!==o?o[1]:""),s.append(t(a[l],s));break;case"form":s=e.makeForm(a[l]);break;case"list":s=e.makeList(a[l]);break;case"table":s=e.makeTable(a[l].keyList,a[l].data);break;case"b":case"p":s=e.makeElement(void 0!==o?o[0]:l,void 0!==o?o[1]:""),"[object Array]"!==Object.prototype.toString.call(a[l])&&s.append(a[l]);break;case"img":s=["<img "+(void 0!==o?'class="'+o[1]+'" ':"")+'src="'+a[l]+'" '+(void 0!==o?'title="'+o[1]+'" ':"")+'alt="'+(void 0!==o?o[1]:a[l])+'" />'];break;case"h1":case"h2":case"h3":case"h4":s=e.makeElement(void 0!==o?o[0]:l,void 0!==o?o[1]:""),s.append(e.cleanTitles(a[l]));break;default:s=e.makeElement(void 0!==o?o[0]:l,void 0!==o?o[1]:""),s.append(p)}void 0!==s&&n.append(s)}return n},e.build=function(a){var n,i;return n=a.name,i=e.makeElement("div",n+" view"),i=t(a.structure,i)},e.example={name:"example",structure:[{h1:"The Title"},{div:{div:{p:'This is an <a href="#">example<a/> of paragraph text<br>squirted into a document with <b>inner HTML</b> '},form:e.exampleForm}},{"div:myClass":[{h3:"Sub-title"},{"p:green":"This is a list of paragraphs"}]}]},e}(ViewMachine),void 0===ViewMachine)var ViewMachine={};if(void 0===jQuery)console.log("Please add JS dependecy jQuery before loading this file.");else var $=jQuery;ViewMachine=function(e){"use strict";return e.El=function(e,t){return this.element=e,void 0===t&&(t={}),this.properties=t,this.children=[],this.getId=function(){return""+Math.floor(1e7*Math.random()+1)},this},e.El.prototype={HTML:function(e){this.drawn||(this.properties.id=this.getId()),e&&(this.drawn=!0);var t=$("<"+this.element+">",this.properties);for(var a in this.children)$(t).append(this.children[a].HTML(e));return t},draw:function(){var e=this.HTML();if(this.drawn&&this.remove(),"string"==typeof this.parent)$(this.parent).append(e),this.drawn=!0;else{if(this.parent.drawn!==!0)throw{name:"DrawError",message:"Parent not drawn"};$("#"+this.parent.properties.id).append(e),this.drawn=!0}return this},remove:function(){return this.drawn?($("#"+this.properties.id).remove(),this.drawn=!1,this):void 0},append:function(e){return e.parent=this,this.children.push(e),this},parent:"body"},e.titles={example:"Example"},e.cleanTitles=function(e,t){var a,n;if(void 0!==t)return this.titles[e]=t,void 0;if(void 0===this.titles[e]&&e.length){for(n=e.toLowerCase().replace(/_/g," ").split(" "),a=0;n.length>a;a+=1)void 0!==this.titles[n[a]]&&(n[a]=this.titles[n[a]]),n[a]=n[a][0].toUpperCase()+n[a].substring(1);n=n.join(" ")}else n=e.length?this.titles[e]:e;return n},e.makeElement=function(e,t,a,n,i,l){var o,r,s,p;if(i=void 0!==i?i:"",n=void 0!==n?n:"",t=void 0!==t?t:"",p={},t.length&&(p["class"]=t),(n.length||i.length||"number"==typeof n||"number"==typeof i)&&(p.id=n+i),void 0!==a&&(null!==a&&19===a.length&&(o=a.replace(/\D/g," "),o=o.split(" "),6===o.length&&(a=new Date(o[0],o[1]-1,o[2],o[3],o[4],o[5]).toDateString())),p.text=a),r=$("<"+e+">",p),"object"==typeof l)for(s in l)l.hasOwnProperty(s)&&r.attr(s,l[s]);return r},e.makeList=function(t,a){var n,i,l,o,r,s;if(a=void 0!==a?a:e.makeElement("ul","list"),"[object Array]"!==Object.prototype.toString.call(t))for(n in t)t.hasOwnProperty(n)&&("object"!=typeof t[n]?(i=e.makeElement("li","item",t[n],n),a.append(i)):null!==t[n]&&(l=e.makeElement("ul",n.split(" ")[0]+" list"),a.append(l),i=e.makeElement("h3","title",e.cleanTitles(n)),l.append(i),e.makeList(t[n],l)));else if("object"!=typeof t[0])for(s=void 0!==a?a.attr("id"):"item",o=void 0!==a?a.attr("class"):"item",r=0;t.length>r;r+=1)i=e.makeElement("li",o,t[r],s,r+1),a.append(i);else for(r=0;t.length>r;r+=1)a.append(e.makeList(t[r],a));return a},e.makeCells=function(t,a,n){var i,l,o,r,s={};for(o in t)if(t.hasOwnProperty(o))if("object"!=typeof t[o]&&"[object Array]"!==Object.prototype.toString.call(t[o])&&-1!==n.indexOf(o))s[o]=null===t[o]?e.makeElement("td","none",""):e.makeElement("td",o,t[o]);else if("[object Array]"===Object.prototype.toString.call(t[o]))r=t[o].join(", "),s[o]=e.makeElement("td",o,r);else if("object"==typeof t[o]){i=e.makeCells(t[o],a,n);for(l in i)i.hasOwnProperty(l)&&(s[l]=i[l])}return s},e.makeTable=function(t,a){function n(t){return e.makeElement("tr",t)}var i,l,o,r,s,p,m;for(i=e.makeElement("table","classic"),s=n("title"),l=0;t.length>l;l+=1)o=e.cleanTitles(t[l]),s.append(e.makeElement("th",t[l],o));m=e.makeElement("thead"),m.append(s),i.append(m);for(r in a)if(a.hasOwnProperty(r)){for(s=n("row"),p=e.makeCells(a[r],s,t),l=0;t.length>l;l+=1)p.hasOwnProperty(t[l])?s.append(p[t[l]]):s.append(e.makeElement("td",t[l]+" none",""));i.append(s)}return i},e.getKeys=function(t,a){var n,i,l,o,r={};for(i in a)if(a.hasOwnProperty(i))if("[object Array]"!==Object.prototype.toString.call(a[i])&&-1!==t.indexOf(i))if("object"==typeof a[i]){n=[];for(l in a[i])a[i].hasOwnProperty(l)&&n.push(l);r[i]=n.join(", "),o=e.getKeys(t,a[i]);for(l in o)o.hasOwnProperty(l)&&(r[l]=o[l])}else r[i]=a[i];else if(a.hasOwnProperty(i)&&"[object Array]"===Object.prototype.toString.call(a[i]))r[i]=a[i].join(", ");else if("object"==typeof a[i]){o=e.getKeys(t,a[i]);for(l in o)o.hasOwnProperty(l)&&(r[l]=o[l])}return r},e.makeForm=function(t){var a,n,i,l,o,r,s,p,m,c,d,f,h;for(a=void 0===t.fieldsetName?void 0!==t.formName?t.formName:"":t.fieldsetName,n=e.makeElement("fieldset",a),i=t.form,m=0;i.length>m;m+=1){switch(d=i[m].hasOwnProperty("name")?i[m].name:i[m].label,f=i[m].hasOwnProperty("cssClass")?i[m].cssClass:i[m].elementType,i[m].elementType){case"input":case"textarea":o=e.cleanTitles(i[m].label),n.append(e.makeElement("label",f,o+":","","",{"for":d})),r=["<"+i[m].elementType+' name="'+d+'"'+' id="'+d+'"'+" />"],n.append(r);break;case"checkbox":case"radio":for(c=0;i[m].options.length>c;c+=1)o=e.cleanTitles(i[m].options[c]),n.append(e.makeElement("label",f,o+":","","",{"for":i[m].options[c]})),h={type:i[m].elementType,name:"radio"===i[m].elementType?d:i[m].options[c]},h.value=void 0!==i[m].value?i[m].value[c]:i[m].options[c],i[m].selected===i[m].options[c]&&(h.checked="checked"),n.append(e.makeElement("input",f,"",i[m].options[c],"",h));break;case"select multiple":case"select":if(o=e.cleanTitles(i[m].label),n.append(e.makeElement("label",f,o+":","","",{"for":d})),l=e.makeElement("select",d,"",d,"","select multiple"===i[m].elementType?{multiple:"multiple"}:""),void 0!==i[m].options)for(c=0;i[m].options.length>c;c+=1)h={},h.value=void 0!==i[m].value?i[m].value[c]:i[m].options[c],i[m].selected===i[m].options[c]&&(h.selected="selected"),l.append(e.makeElement("option",f,i[m].options[c],h.value,"",h));n.append(l);break;case"button":o=e.cleanTitles(i[m].text),n.append(e.makeElement("button",f,o,d,"",{onclick:i[m].onclick}))}n.append("<br />")}return t.formName?(t.action&&t.formName&&(s={action:t.action,method:t.method}),p=e.makeElement("form",t.formName,"","","",s),p.append(n)):n},e.exampleForm={action:"",method:"",formName:"MyForm",fieldsetName:"myFields",form:[{name:"myField",label:"My Fav Textarea",elementType:"textarea",defaultText:"Prefill text...",cssClass:"customClass"},{name:"myField",label:"My Fav Textarea",elementType:"input",defaultText:"Prefill text..."},{label:"label2",elementType:"radio",options:["Male","Female"],selected:"Female",value:["m","f"]},{label:"label2",elementType:"checkbox",options:["Male","Female"],selected:"Female",value:["m","f"]},{name:"selectBox",label:"My Select Box",elementType:"select",options:["opt1","opt2","opt3"],selected:"opt2",value:[1,2,3]},{name:"selectBox2",label:"Same - No Values or selected specified",elementType:"select",options:["opt1","opt2","opt3"]},{name:"multipleSelect",label:"Same - No Values or selected specified",elementType:"select multiple",options:["opt1","opt2","opt3"]},{label:"myButton",elementType:"button",text:"Submit yourself!",onclick:"alert('I will not submit to you'); return false;"}]},e.exampleList=["Apples","Pears","Limes","Oranges","Plums"],e.exampleTable={keyList:["Apples","Pears","Limes","Oranges","Plums"],data:{fruits1:{Apples:10,Pears:20,Limes:100,Oranges:15,Plums:4},fruits2:{Apples:2,Pears:4,Limes:8,Oranges:16,Plums:32},fruits3:{Apples:64,Pears:128,Limes:256,Plums:1024}}},e}(ViewMachine);